{"sections":[],"hierarchy":{"paths":[[]]},"kind":"symbol","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/asynclifetime"]}],"abstract":[{"type":"text","text":"Automatic lifetime management for async sequences, preventing retain cycles and ensuring proper resource cleanup."}],"topicSections":[{"anchor":"Classes","generated":true,"identifiers":["doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/AnyLifetimeCancellable"],"title":"Classes"},{"anchor":"Protocols","generated":true,"identifiers":["doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/LifetimeCancellable"],"title":"Protocols"},{"anchor":"Functions","generated":true,"identifiers":["doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withLifetime(isolation:of:consuming:forEach:)-1p3bp","doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withLifetime(isolation:of:consuming:forEach:)-3jfpy","doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withMainActorLifetime(of:consuming:forEach:)-6swlo","doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withMainActorLifetime(of:consuming:forEach:)-92awe"],"title":"Functions"},{"anchor":"Extended-Modules","generated":true,"identifiers":["doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/_Concurrency"],"title":"Extended Modules"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime"},"schemaVersion":{"major":0,"patch":0,"minor":3},"metadata":{"title":"AsyncLifetime","externalID":"AsyncLifetime","roleHeading":"Framework","symbolKind":"module","role":"collection","modules":[{"name":"AsyncLifetime"}]},"primaryContentSections":[{"content":[{"anchor":"Overview","type":"heading","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"AsyncLifetime provides a suite of functions that automatically bind async sequence processing to object lifetimes. When the target object is deallocated, any ongoing async operations are automatically cancelled, preventing retain cycles and unnecessary computation."}]},{"type":"paragraph","inlineContent":[{"text":"This solves a fundamental problem in Swift’s async\/await world: automatically stopping async operations when the objects that depend on them are deallocated.","type":"text"}]},{"anchor":"The-Problem-We-Solve","type":"heading","text":"The Problem We Solve","level":2},{"anchor":"The-Root-Cause-implicitSelfCapture-in-Task","type":"heading","text":"The Root Cause: `@_implicitSelfCapture` in Task","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"The core issue stems from Swift’s "},{"type":"codeVoice","code":"Task"},{"type":"text","text":" initializer which uses "},{"type":"codeVoice","code":"@_implicitSelfCapture"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"text":"Consider this typical pattern in view model initialization:","type":"text"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    ","    init(dataStream: AsyncStream<String>) {","        Task {","            for await item in dataStream {","                items.append(item) \/\/ self is implicitly strongly captured by Task","            }","        }","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"The Problem"}]},{"type":"text","text":": The "},{"type":"codeVoice","code":"Task"},{"type":"text","text":" holds a strong reference to "},{"type":"codeVoice","code":"self"},{"type":"text","text":" (the ViewModel), preventing it from being deallocated even when the UI is dismissed."}]},{"anchor":"The-AsyncLifetime-Solution","type":"heading","text":"The AsyncLifetime Solution","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"With AsyncLifetime, operations automatically stop when the object is deallocated:"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var value: String","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        dataStream","            .assign(to: \\.value, weakOn: self)","            .store(in: &cancellables)","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"How it works","type":"text"}],"type":"strong"},{"text":": AsyncLifetime uses ","type":"text"},{"inlineContent":[{"type":"text","text":"weak references"}],"type":"strong"},{"text":" to break the retain cycle, automatically cancelling operations when the target object is deallocated.","type":"text"}]},{"anchor":"Core-Concepts","type":"heading","text":"Core Concepts","level":2},{"anchor":"1-Automatic-Lifetime-Binding","type":"heading","text":"1. Automatic Lifetime Binding","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"The lifetime of async operations is automatically bound to objects:"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        withLifetime(of: self, consuming: dataStream) { service, item in","            service.items.append(item)","        }","        .cancellable.store(in: &cancellables)","    }","}"],"syntax":"swift"},{"anchor":"2-Weak-References","type":"heading","text":"2. Weak References","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"AsyncLifetime uses weak references to prevent retain cycles:"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        withLifetime(of: self, consuming: dataStream) { service, item in","            service.items.append(item)","        }","        .cancellable.store(in: &cancellables)","    }","}"],"syntax":"swift"},{"anchor":"3-Actor-Isolation","type":"heading","text":"3. Actor Isolation","level":3},{"type":"paragraph","inlineContent":[{"text":"Operations respect Swift’s actor isolation:","type":"text"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        withLifetime(of: self, consuming: dataStream) { service, item in","            service.items.append(item)","        }","        .cancellable.store(in: &cancellables)","    }","}"],"syntax":"swift"},{"anchor":"Quick-Start-Examples","type":"heading","text":"Quick Start Examples","level":2},{"anchor":"Property-Assignment-in-Initialization","type":"heading","text":"Property Assignment in Initialization","level":3},{"type":"paragraph","inlineContent":[{"text":"The most common pattern - automatic lifetime binding during initialization:","type":"text"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        withLifetime(of: self, consuming: dataStream) { service, item in","            service.items.append(item)","        }","        .cancellable.store(in: &cancellables)","    }","}"],"syntax":"swift"},{"anchor":"Manual-Cancellation-Control","type":"heading","text":"Manual Cancellation Control","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Store cancellable objects when you need explicit control:"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        withLifetime(of: self, consuming: dataStream) { service, item in","            service.items.append(item)","        }","        .cancellable.store(in: &cancellables)","    }","    ","    func refresh() {","        \/\/ Can manually stop all operations","        cancellables.forEach { $0.cancel() }","        cancellables.removeAll()","    }","}"],"syntax":"swift"},{"anchor":"Migration-Guide","type":"heading","text":"Migration Guide","level":2},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before (Retain Cycle):"}]}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var task: Task<Void, Never>?","    ","    init(dataStream: AsyncStream<String>) {","        \/\/ ❌ Creates strong reference to self","        task = Task {","            for await item in dataStream {","                items.append(item) \/\/ long running or infinite stream will hold self","            }","        }","","        \/\/ To break the cycle you would need think wisely and use [weak ...] ","        \/\/ and capture object only while processing item in for loop","        task = Task { [weak self] in","            for await item in dataStream {","                guard let self else { return }","                items.append(item) \/\/ long running or infinite stream will hold self","            }","        }","    }","    ","    deinit {","        \/\/ ❌ This never gets called due to Task holding self","        task?.cancel()","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"After AsyncLifetime:","type":"text"}],"type":"strong"}]},{"type":"codeListing","code":["@MainActor","@Observable","class Model {","    var items: [String] = []","    private var cancellables = Set<AnyLifetimeCancellable>()","","    init(dataStream: AsyncStream<String>) {","        withLifetime(of: self, consuming: dataStream) { service, item in","            service.items.append(item)","        }","        .cancellable.store(in: &cancellables)","    }","    ","    \/\/ ✅ deinit is called properly, no manual cleanup needed","}"],"syntax":"swift"}],"kind":"content"}],"references":{"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/withLifetime(isolation:of:consuming:forEach:)-1p3bp":{"url":"\/documentation\/asynclifetime\/withlifetime(isolation:of:consuming:foreach:)-1p3bp","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"withLifetime","kind":"identifier"},{"text":"<","kind":"text"},{"text":"Instance","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"OperationError","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"Stream","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"isolation","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"isolated","kind":"keyword"},{"text":" (","kind":"text"},{"text":"any","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Actor","kind":"typeIdentifier","preciseIdentifier":"s:ScA"},{"text":")?, ","kind":"text"},{"text":"of","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"sending","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Instance","kind":"typeIdentifier","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq0_yx_7ElementQy0_tYaq_YKcntRlzCsAGR_SciR0_s8SendableANRQr1_lF8InstanceL_xmfp"},{"text":", ","kind":"text"},{"text":"consuming","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Stream","kind":"typeIdentifier","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq0_yx_7ElementQy0_tYaq_YKcntRlzCsAGR_SciR0_s8SendableANRQr1_lF6StreamL_q0_mfp"},{"text":", ","kind":"text"},{"text":"forEach","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"sending","kind":"keyword"},{"text":" (","kind":"text"},{"text":"_","kind":"externalParam"},{"text":" ","kind":"text"},{"text":"object","kind":"internalParam"},{"text":": ","kind":"text"},{"text":"Instance","kind":"typeIdentifier","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq0_yx_7ElementQy0_tYaq_YKcntRlzCsAGR_SciR0_s8SendableANRQr1_lF8InstanceL_xmfp"},{"text":", ","kind":"text"},{"text":"_","kind":"externalParam"},{"text":" ","kind":"text"},{"text":"element","kind":"internalParam"},{"text":": ","kind":"text"},{"text":"Stream","kind":"typeIdentifier","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq0_yx_7ElementQy0_tYaq_YKcntRlzCsAGR_SciR0_s8SendableANRQr1_lF6StreamL_q0_mfp"},{"text":".","kind":"text"},{"text":"Element","kind":"typeIdentifier","preciseIdentifier":"s:Sci7ElementQa"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":"(","kind":"text"},{"text":"OperationError","kind":"typeIdentifier","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq0_yx_7ElementQy0_tYaq_YKcntRlzCsAGR_SciR0_s8SendableANRQr1_lF09OperationI0L_q_mfp"},{"text":") -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":") -> (task","kind":"text"},{"text":": ","kind":"text"},{"text":"Task","kind":"typeIdentifier","preciseIdentifier":"s:ScT"},{"text":"<","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":", ","kind":"text"},{"text":"any","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":">, cancellable","kind":"text"},{"text":": ","kind":"text"},{"text":"any","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LifetimeCancellable","kind":"typeIdentifier","preciseIdentifier":"s:13AsyncLifetime0B11CancellableP"},{"text":")","kind":"text"}],"identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withLifetime(isolation:of:consuming:forEach:)-1p3bp","role":"symbol","title":"withLifetime(isolation:of:consuming:forEach:)","type":"topic","abstract":[{"type":"text","text":"Creates a cancellable for processing elements from an async sequence while an object remains alive, with"},{"type":"text","text":" "},{"type":"text","text":"configurable actor isolation."}],"kind":"symbol"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime":{"identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime","type":"topic","abstract":[{"text":"Automatic lifetime management for async sequences, preventing retain cycles and ensuring proper resource cleanup.","type":"text"}],"title":"AsyncLifetime","url":"\/documentation\/asynclifetime","role":"collection","kind":"symbol"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/_Concurrency":{"abstract":[],"role":"collection","kind":"symbol","type":"topic","identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/_Concurrency","title":"_Concurrency","url":"\/documentation\/asynclifetime\/_concurrency"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/withMainActorLifetime(of:consuming:forEach:)-92awe":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withMainActorLifetime"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Instance"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"Stream"},{"kind":"text","text":">("},{"kind":"externalParam","text":"of"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Instance","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletx_q_yx_7ElementQy_tYbScMYcctRlzCSciR_s8SendableAMRQAG7FailureRt_r0_lF8InstanceL_xmfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"consuming"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Stream","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletx_q_yx_7ElementQy_tYbScMYcctRlzCSciR_s8SendableAMRQAG7FailureRt_r0_lF6StreamL_q_mfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"forEach"},{"kind":"text","text":": @"},{"kind":"typeIdentifier","text":"MainActor","preciseIdentifier":"s:ScM"},{"kind":"text","text":" ("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"object"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Instance","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletx_q_yx_7ElementQy_tYbScMYcctRlzCSciR_s8SendableAMRQAG7FailureRt_r0_lF8InstanceL_xmfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"element"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Stream","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletx_q_yx_7ElementQy_tYbScMYcctRlzCSciR_s8SendableAMRQAG7FailureRt_r0_lF6StreamL_q_mfp"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Element","preciseIdentifier":"s:Sci7ElementQa"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":") -> (task"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Task","preciseIdentifier":"s:ScT"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Never","preciseIdentifier":"s:s5NeverO"},{"kind":"text","text":">, cancellable"},{"kind":"text","text":": "},{"kind":"keyword","text":"any"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"LifetimeCancellable","preciseIdentifier":"s:13AsyncLifetime0B11CancellableP"},{"kind":"text","text":")"}],"kind":"symbol","type":"topic","title":"withMainActorLifetime(of:consuming:forEach:)","url":"\/documentation\/asynclifetime\/withmainactorlifetime(of:consuming:foreach:)-92awe","identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withMainActorLifetime(of:consuming:forEach:)-92awe","abstract":[{"type":"text","text":"Creates a task and cancellable for processing elements from an async sequence while an object remains alive, running"},{"type":"text","text":" "},{"type":"text","text":"on the main actor."}],"role":"symbol"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/withMainActorLifetime(of:consuming:forEach:)-6swlo":{"url":"\/documentation\/asynclifetime\/withmainactorlifetime(of:consuming:foreach:)-6swlo","type":"topic","identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withMainActorLifetime(of:consuming:forEach:)-6swlo","role":"symbol","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"withMainActorLifetime","kind":"identifier"},{"text":"<","kind":"text"},{"text":"Instance","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"OperationError","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"Stream","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"of","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Instance","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletx_q0_yx_7ElementQy0_tYbq_YKScMYcctRlzCsAFR_SciR0_s8SendableALRQr1_lF8InstanceL_xmfp","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"consuming","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Stream","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletx_q0_yx_7ElementQy0_tYbq_YKScMYcctRlzCsAFR_SciR0_s8SendableALRQr1_lF6StreamL_q0_mfp","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"forEach","kind":"externalParam"},{"text":": @","kind":"text"},{"text":"MainActor","preciseIdentifier":"s:ScM","kind":"typeIdentifier"},{"text":" (","kind":"text"},{"text":"_","kind":"externalParam"},{"text":" ","kind":"text"},{"text":"object","kind":"internalParam"},{"text":": ","kind":"text"},{"text":"Instance","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletx_q0_yx_7ElementQy0_tYbq_YKScMYcctRlzCsAFR_SciR0_s8SendableALRQr1_lF8InstanceL_xmfp","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"_","kind":"externalParam"},{"text":" ","kind":"text"},{"text":"element","kind":"internalParam"},{"text":": ","kind":"text"},{"text":"Stream","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletx_q0_yx_7ElementQy0_tYbq_YKScMYcctRlzCsAFR_SciR0_s8SendableALRQr1_lF6StreamL_q0_mfp","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"Element","preciseIdentifier":"s:Sci7ElementQa","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":"(","kind":"text"},{"text":"OperationError","preciseIdentifier":"s:13AsyncLifetime013withMainActorB02of9consuming7forEachScTyyts5Error_pG4task_AA0B11Cancellable_p11cancellabletx_q0_yx_7ElementQy0_tYbq_YKScMYcctRlzCsAFR_SciR0_s8SendableALRQr1_lF09OperationJ0L_q_mfp","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Void","preciseIdentifier":"s:s4Voida","kind":"typeIdentifier"},{"text":") -> (task","kind":"text"},{"text":": ","kind":"text"},{"text":"Task","preciseIdentifier":"s:ScT","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Void","preciseIdentifier":"s:s4Voida","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"any","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Error","preciseIdentifier":"s:s5ErrorP","kind":"typeIdentifier"},{"text":">, cancellable","kind":"text"},{"text":": ","kind":"text"},{"text":"any","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LifetimeCancellable","preciseIdentifier":"s:13AsyncLifetime0B11CancellableP","kind":"typeIdentifier"},{"text":")","kind":"text"}],"abstract":[{"text":"Creates a task and cancellable for processing elements from an async sequence while an object remains alive, running","type":"text"},{"text":" ","type":"text"},{"text":"on the main actor.","type":"text"}],"title":"withMainActorLifetime(of:consuming:forEach:)"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/LifetimeCancellable":{"title":"LifetimeCancellable","type":"topic","kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"LifetimeCancellable"}],"navigatorTitle":[{"kind":"identifier","text":"LifetimeCancellable"}],"url":"\/documentation\/asynclifetime\/lifetimecancellable","abstract":[{"type":"text","text":"A protocol that represents an object that can be cancelled to terminate its associated lifetime-bound operations."}],"identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/LifetimeCancellable"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/withLifetime(isolation:of:consuming:forEach:)-3jfpy":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withLifetime"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Instance"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"Stream"},{"kind":"text","text":">("},{"kind":"externalParam","text":"isolation"},{"kind":"text","text":": "},{"kind":"keyword","text":"isolated"},{"kind":"text","text":" ("},{"kind":"keyword","text":"any"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Actor","preciseIdentifier":"s:ScA"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"of"},{"kind":"text","text":": "},{"kind":"keyword","text":"sending"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Instance","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq_yx_7ElementQy_tYacntRlzCSciR_s8SendableAORQAH7FailureRt_r0_lF8InstanceL_xmfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"consuming"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Stream","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq_yx_7ElementQy_tYacntRlzCSciR_s8SendableAORQAH7FailureRt_r0_lF6StreamL_q_mfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"forEach"},{"kind":"text","text":": "},{"kind":"keyword","text":"sending"},{"kind":"text","text":" ("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"object"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Instance","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq_yx_7ElementQy_tYacntRlzCSciR_s8SendableAORQAH7FailureRt_r0_lF8InstanceL_xmfp"},{"kind":"text","text":", "},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"element"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Stream","preciseIdentifier":"s:13AsyncLifetime04withB09isolation2of9consuming7forEachScTyyts5NeverOG4task_AA0B11Cancellable_p11cancellabletScA_pSgYi_xnq_yx_7ElementQy_tYacntRlzCSciR_s8SendableAORQAH7FailureRt_r0_lF6StreamL_q_mfp"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Element","preciseIdentifier":"s:Sci7ElementQa"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":") -> (task"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Task","preciseIdentifier":"s:ScT"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Never","preciseIdentifier":"s:s5NeverO"},{"kind":"text","text":">, cancellable"},{"kind":"text","text":": "},{"kind":"keyword","text":"any"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"LifetimeCancellable","preciseIdentifier":"s:13AsyncLifetime0B11CancellableP"},{"kind":"text","text":")"}],"kind":"symbol","type":"topic","title":"withLifetime(isolation:of:consuming:forEach:)","url":"\/documentation\/asynclifetime\/withlifetime(isolation:of:consuming:foreach:)-3jfpy","identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/withLifetime(isolation:of:consuming:forEach:)-3jfpy","abstract":[{"type":"text","text":"Creates a cancellable for processing elements from an async sequence while an object remains alive, with"},{"type":"text","text":" "},{"type":"text","text":"configurable actor isolation."}],"role":"symbol"},"doc://asynclifetime.AsyncLifetime/documentation/AsyncLifetime/AnyLifetimeCancellable":{"navigatorTitle":[{"kind":"identifier","text":"AnyLifetimeCancellable"}],"abstract":[{"text":"A type-erased lifetime cancellable that wraps any ","type":"text"},{"isActive":true,"identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/LifetimeCancellable","type":"reference"},{"text":" object.","type":"text"}],"title":"AnyLifetimeCancellable","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"AnyLifetimeCancellable"}],"url":"\/documentation\/asynclifetime\/anylifetimecancellable","identifier":"doc:\/\/asynclifetime.AsyncLifetime\/documentation\/AsyncLifetime\/AnyLifetimeCancellable","type":"topic","role":"symbol","kind":"symbol"}}}